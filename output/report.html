<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>PROJECT_AUDIT_REPORT</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
		<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
		<style>
			@import url('https://fonts.googleapis.com/css2?family=Inter:wght@900&display=swap');
			body { background-color: #0F0F0F; color: #FFFFFF; font-family: 'Inter', sans-serif; }
			.swiper { width: 100%; height: 100vh; }
			.huge-num { font-size: 15vw; line-height: 0.8; letter-spacing: -0.05em; font-weight: 900; }
			.label-rect { background: #FF3E3E; color: #000; padding: 2px 8px; font-size: 12px; font-weight: bold; text-transform: uppercase; }
			.border-heavy { border-left: 12px solid #FF3E3E; padding-left: 20px; }
			.chart-box { height: 30vh; width: 100%; }
			/* 隐藏滚动条 */
			::-webkit-scrollbar { display: none; }
		</style>
	</head>
	<body>

		<div class="swiper">
			<div class="swiper-wrapper">

				<div class="swiper-slide p-10 flex flex-col justify-center">
					<div class="mb-4"><span class="label-rect">Audit_Phase_01</span></div>
					<div class="huge-num mb-6">DATA<br>VOLUME</div>
					<div class="border-heavy">
						<div class="text-4xl font-black">${repoData.project_metadata.total_commits}</div>
						<div class="text-gray-500 text-sm uppercase">Total Commit Events</div>
					</div>
					<div class="mt-12 space-y-4">
						<p class="text-gray-400 text-sm leading-tight">
							在当前统计周期内，系统记录了 <span class="text-white">${repoData.project_metadata.total_commits}</span>
							次有效变更。
							代码库规模呈现线性增长，Bus Factor 指数维持在 <span class="text-white">${repoData.project_metadata.bus_factor}</span>，
							显示出高度集中的开发路径。
						</p>
					</div>
				</div>

				<div class="swiper-slide p-10 flex flex-col justify-center bg-[#1A1A1A]">
					<div class="mb-4"><span class="label-rect">Audit_Phase_02</span></div>
					<div class="huge-num mb-6 text-[#FF3E3E]">+${repoData.workload_stats.net_lines}</div>
					<div class="text-2xl font-black mb-8">NET_INCREMENT</div>
					<div class="grid grid-cols-2 gap-4">
						<div>
							<div class="text-xs text-gray-500 uppercase">Insertions</div>
							<div class="text-xl font-bold text-white">${repoData.workload_stats.total_insertions}</div>
						</div>
						<div>
							<div class="text-xs text-gray-500 uppercase">Deletions</div>
							<div class="text-xl font-bold text-white">${repoData.workload_stats.total_deletions}</div>
						</div>
					</div>
					<p class="mt-10 text-gray-400 text-sm">
						重构率统计值为 <span class="text-white">${(repoData.workload_stats.refactor_ratio * 100).toFixed(0)}%</span>。
						这表明开发活动主要集中于功能的原始构建，而非对既有逻辑的优化或清理。
					</p>
				</div>

				<div class="swiper-slide p-10 flex flex-col justify-center">
					<div class="mb-4"><span class="label-rect">Audit_Phase_03</span></div>
					<div class="text-5xl font-black mb-10">TEMPORAL<br>DENSITY</div>
					<div id="hourChart" class="chart-box mb-8"></div>
					<div class="border-heavy">
						<div class="text-sm text-gray-400 uppercase">Peak Efficiency Hour</div>
						<div class="text-2xl font-bold" id="peakHourText">--:--</div>
					</div>
					<p class="mt-6 text-gray-500 text-xs italic">
						* 行为模式分析：系统在 13-14 时区间检测到峰值热度。
					</p>
				</div>

				<div class="swiper-slide p-10 flex flex-col justify-start pt-20 bg-white text-black">
					<div class="mb-4"><span class="label-rect" style="background: #000; color: #fff;">Audit_Phase_04</span></div>
					<div class="text-5xl font-black mb-8 leading-none">VULNERABLE<br>FILES</div>
					<div class="space-y-6">
						${repoData.file_system_analysis.hotspots.slice(0, 5).map(h => `
						<div class="border-b-2 border-black pb-2">
							<div class="text-[10px] uppercase font-bold text-gray-500">${h.risk_level} Risk</div>
							<div class="text-sm font-black truncate">${h.path}</div>
							<div class="text-xs font-bold text-[#FF3E3E]">${h.change_count} UPDATES</div>
						</div>
						`).join('')}
					</div>
					<p class="mt-8 text-xs font-bold uppercase tracking-widest">
						核心组件 <span class="underline">${repoData.file_system_analysis.hotspots[0].path}</span>
						具有最高变更频率，
						属于系统逻辑耦合中心。
					</p>
				</div>
			</div>
			<div class="swiper-pagination"></div>
		</div>

		<script>
			const repoData = {"project_metadata":{"generated_at":"2025-12-31T14:43:49.741716898+08:00","local_timezone":"+08:00","total_commits":8,"total_authors":1,"bus_factor":1,"last_commit_time":"2025-12-31T06:37:36+00:00","time_range":{"start":"1767143856","end":"1767163056"}},"workload_stats":{"total_insertions":3128,"total_deletions":962,"net_lines":2166,"refactor_ratio":0.31,"code_retention_rate":0.0},"author_leaderboard":[{"name":"merwinM0","email":"18358511710@139.com","commit_count":8,"insertions":3128,"deletions":962,"impact_score":20.1,"active_days":1,"avg_cycle_time_hours":0.0,"preferred_work_hours":"Standard","role":"Maintainer"}],"temporal_trends":{"daily_commits":{"2025-12-31":8},"hourly_distribution":{"00时":0,"01时":0,"02时":0,"03时":0,"04时":0,"05时":0,"06时":0,"07时":0,"08时":0,"09时":2,"10时":1,"11时":0,"12时":0,"13时":3,"14时":2,"15时":0,"16时":0,"17时":0,"18时":0,"19时":0,"20时":0,"21时":0,"22时":0,"23时":0},"weekly_distribution":{"Wed":8}},"file_system_analysis":{"hotspots":[{"path":"src/main.rs","change_count":8,"unique_authors":1,"risk_level":"Low"},{"path":"output/processed_summary.json","change_count":1,"unique_authors":1,"risk_level":"Low"},{"path":"raw_commits.json","change_count":4,"unique_authors":1,"risk_level":"Low"},{"path":"processed_summary.json","change_count":4,"unique_authors":1,"risk_level":"Low"},{"path":"output/report.html","change_count":1,"unique_authors":1,"risk_level":"Low"},{"path":"assets/template.html","change_count":1,"unique_authors":1,"risk_level":"Low"},{"path":"output/raw_commits.json","change_count":1,"unique_authors":1,"risk_level":"Low"},{"path":".gitignore","change_count":1,"unique_authors":1,"risk_level":"Low"},{"path":"Cargo.toml","change_count":3,"unique_authors":1,"risk_level":"Low"},{"path":"Cargo.lock","change_count":3,"unique_authors":1,"risk_level":"Low"}],"language_distribution":{},"file_coupling":[]},"engineering_quality":{"commit_type_distribution":{"unknown":8},"avg_files_per_commit":3.5,"gpg_signed_percentage":0.0,"potential_secrets_found":0}};
			
			// 初始化 Swiper
			const swiper = new Swiper('.swiper', {
				direction: 'vertical',
				mousewheel: true,
				pagination: { el: '.swiper-pagination', clickable: true },
				on: {
					slideChange: function() {
						if(this.activeIndex === 2) renderChart();
					}
				}
				});
				
				function renderChart() {
					const chart = echarts.init(document.getElementById('hourChart'), 'dark');
					const hours = repoData.temporal_trends.hourly_distribution;
					const keys = Object.keys(hours);
					const values = Object.values(hours);
					
					const peak = keys.reduce((a, b) => hours[a] > hours[b] ? a : b);
					document.getElementById('peakHourText').innerText = peak;
					
					chart.setOption({
						backgroundColor: 'transparent',
						xAxis: {
							type: 'category', data: keys,
							axisLine: {show: false}, axisTick: {show: false},
							axisLabel: { color: '#555', fontSize: 10 }
							},
							yAxis: { show: false },
							grid: { top: 0, bottom: 20, left: 0, right: 0 },
							series: [{
								data: values, type: 'bar',
								itemStyle: { color: '#FF3E3E' },
								barWidth: '60%'
								}]
								});
							}
							
							// 初始化第一页
							window.onload = () => { if(swiper.activeIndex === 2) renderChart(); };
		</script>
	</body>
</html>
